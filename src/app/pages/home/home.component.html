<div class="home-container">
  <div class="whatsapp-container">
    <button class="whatsapp-button" (click)="toggleWhatsAppPopup()">
      <img
        src="assets/images/whatsapp.png"
        alt="WhatsApp Icon"
        width="80"
        height="80"
      />
    </button>

    <div class="whatsapp-popup" *ngIf="mostrarPopupWhatsApp">
      <div class="popup-header">
        <span>WhatsApp</span>
        <button (click)="toggleWhatsAppPopup()">✖</button>
      </div>
      <div class="popup-body">
        <p>¡Hola! ¿En qué podemos ayudarte?</p>
        <button class="chat-button" (click)="redirectToWhatsApp()">
          Ir al chat <i nz-icon nzType="arrow-right" nzTheme="outline"></i>
        </button>
      </div>
    </div>
  </div>

  <nz-carousel
    [nzAutoPlay]="true"
    [nzEffect]="'scrollx'"
    [nzAutoPlaySpeed]="3000"
    class="full-screen-carousel"
  >
    <!-- Slide 1 -->
    <div nz-carousel-content>
      <div
        class="carousel-item"
        [ngClass]="animationActive ? 'animation-card1' : ''"
      >
        <img [src]="'assets/images/slide2.jpg'" alt="Slide 1" />
        <div class="carousel-caption">
          <div class="welcome-section">
            <h1 class="welcome-title">¡Bienvenido a Licorería El Chinito!</h1>
            <p class="welcome-text">
              Descubre nuestra selección de licores de alta calidad, perfecta
              para cualquier ocasión. Celebremos juntos con estilo y sabor.
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Slide 2 -->
    <div nz-carousel-content>
      <div
        class="carousel-item"
        [ngClass]="animationActive ? 'animate-card2' : ''"
      >
        <img [src]="'assets/images/slide3.jpg'" alt="Slide 2" />
        <div class="carousel-caption2">
          <div class="card2-section">
            <h1 class="card2-title">Toda la web -10% de descuento</h1>
            <p class="card2-text">
              Ve a comprar y aprovecha esta oferta exclusiva en productos
              seleccionados.
            </p>
            <button class="btn-shop" (click)="goToLiquor()">
              Ir a Licorería
            </button>
          </div>
        </div>
      </div>
    </div>
  </nz-carousel>

  <!-- Ver categorias disponibles -->
  <div class="carousel-container">
    <h1>Categorias</h1>
    <p class="descubre">Descubre nuestras categorias</p>
    <!-- Flecha izquierda -->
    c<button class="arrow left-arrow" (click)="categoryCarousel?.pre()">
      <i nz-icon nzType="left" nzTheme="outline"></i>
    </button>

    <!-- Carrusel -->
    <nz-carousel
      [nzEffect]="'scrollx'"
      [nzDots]="false"
      [nzAutoplay]="true"
      [nzAutoplaySpeed]="3000"
      [nzSwiping]="true"
      [nzArrow]="true"
      [nzInfinite]="true"
      #categoryCarousel
    >
      <div nz-carousel-content>
        <div class="horizontal-container">
          <div *ngFor="let category of categorias" class="horizontal-item">
            <div
              (click)="navigateToCategory(category.route)"
              [ngStyle]="{ 'background-color': category.color }"
              class="category-card"
            >
              <img
                [src]="category.image"
                alt="{{ category.name }}"
                class="category-image"
              />
              <div class="category-info">
                <h3>{{ category.name }}</h3>
                <p>{{ category.products }} productos</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </nz-carousel>

    <!-- Flecha derecha -->
    <button class="arrow right-arrow" (click)="categoryCarousel?.next()">
      <i nz-icon nzType="right" nzTheme="outline"></i>
    </button>
  </div>

  <!-- Productos destacados -->
  <!-- Productos destacados -->
  <div class="products-container">
    <h2 class="section-title">DESTACADOS</h2>

    <!-- Flechas -->
    <button class="arrow left-arrow" (click)="carouselDestacados?.pre()">
      <i nz-icon nzType="left" nzTheme="outline"></i>
    </button>

    <nz-carousel
      [nzEffect]="'scrollx'"
      [nzDots]="false"
      [nzAutoplay]="true"
      [nzAutoplaySpeed]="3000"
      [nzSwiping]="true"
      [nzArrow]="false"
      [nzInfinite]="true"
      #carouselDestacados
    >
      <div nz-carousel-content *ngFor="let grupo of productosAgrupados">
        <div class="horizontal-container">
          <div *ngFor="let product of grupo" class="horizontal-item">
            <div class="product-card">
              <div class="product-image">
                <img
                  [src]="obtenerImagen(product.imagen)"
                  [alt]="product.nombre"
                />
              </div>
              <h3>{{ product.nombre }}</h3>
              <div class="product-details">
                <div class="presentations-list">
                  <select>
                    <option
                      *ngFor="let presentacion of product.presentaciones"
                      [value]="presentacion"
                    >
                      {{ presentacion.presentacion_ml }} ml
                    </option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </nz-carousel>

    <!-- Flecha derecha -->
    <button class="arrow right-arrow" (click)="carouselDestacados?.next()">
      <i nz-icon nzType="right" nzTheme="outline"></i>
    </button>
  </div>

  <!-- Sección: Call to Action -->
  <div class="cta-container">
    <div class="cta-section">
      <div class="cta-divider"></div>
      <h2 class="cta-title">¡Ven a visitarnos<br />o haz tu pedido online!</h2>
      <a
        href="https://wa.link/iecfyy"
        target="_blank"
        rel="noopener noreferrer"
      >
        <button nz-button nzType="primary" nzSize="large" class="cta-button">
          <nz-icon nzType="whatsapp" nzTheme="outline"></nz-icon>
          Contáctanos por WhatsApp
        </button>
      </a>
    </div>
  </div>

  <!-- slider con productos de marcas -->
  <div class="brands-slider">
    <div class="slider-track">
      <div class="slide" *ngFor="let marca of marcas">
        <img
          [src]="marca.logo"
          [alt]="marca.name"
          class="brand-logo"
          loading="lazy"
        />
      </div>
    </div>
  </div>
</div>
